{% load staticfiles %}
<html>
    <head>
        <link rel="stylesheet" href="/static/bootstrap.min.css">
        <link rel="stylesheet" href="{% static 'main.css' %}">
        <script src="{% static 'jquery-3.2.1.min.js' %}"></script>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="{% static 'main.js' %}"></script>

    </head>
    
    <body>
        <div class="main">
            <div class="topcorner">
                <p>Dilip Thiagarajan (dt372) , Ji Hun Kim (jk2227) , Matt White (mpw73) , Rudy Winkler (rgw66)</p>
            </div>
            <br/>
            <br/>
            <br/>
            <h1 style="font-size: 55px; font-family:Futura; color: #626262">
                            <font color="black">Ho</font><font color="#589442">tel</font>
                             or
                            <font color="#ff5a5f">Airbnb</font>?
            </h1>
            {% if not airbnb_output %}
            <div id="main_head">
            {% else %}
            <div style="display: none" id="main_head">
            {% endif %}
                <button class="btn btn-info" onclick="show_words(event)"> Start Search </button>
            </div>
            {% if airbnb_output or hotel_output %}
            <div id="main_page">
            {% else %}
            <div style="display: none" id="main_page">
            {% endif %}
            <form class="form-inline global-search" method='GET' id="wc_form">
                <div class="word_cloud">
                {% for  word in words %}
                    <span class="wc_word" id="{{ word }}" onclick="wc_selection(event)">{{ word }}</span>
                {% endfor %}
                </div>
                <div id="refine_form" style='display:none;'>
                    <br/>
                    <h5>Refine Your Search</h5>
                    <br/>
                    <p>Select a box that is best for you</p>
                    <br/>
                    <div class="refine_word_cloud" id="hotel_refine" onclick="submit_form(event)">
                    </div>
                    <div class="refine_word_cloud" id="airbnb_refine" onclick="submit_form(event)">
                    </div>
    {#            <input id="input" type="input" name="search" class="form-control" placeholder="Your Input">#}
                </div>
            <br/>
            <input id="input" type="hidden" name="search" class="form-control" placeholder="Your Input">
            </form>
            <div class="submit_button" id="submit_button">
                <button class="btn btn-info" onclick="refine_words()"> Go! </button>
            </div>
            <br/>

            {% if airbnb_output or hotel_output %}
            <h4>Winner:</h4>
            <p>{{ search }}</p><br/>
            <a href="{{ best_result.listing_url }}" class="tile" target="_blank">
                    <div class="imgWrap">
                        <img src="{{ best_result.image_url }}" class="tile_icon">
                    </div>
                    <br/>
                    <b>{{ best_result.name }}</b><br/>
                    Similarity Score:
                    <span class="sentiments">
                        {{ best_result.score }}</span>
                    <br/>
                    <p>{{ line.average_sent_score }}</p>
                    <p>{{ line.min_sent_score }}</p>
                    <p style="font-size: 3px">{{ line.min_sent_review }}</p>
                    <br/>
                    <p>{{ line.max_sent_score }}</p>
                    <p>{{ line.max_sent_review }}</p>
                    <br/>
            </a>
            <br/>
            <br/>


            <h5>Other places you might be interested in:</h5>
            <form id="list_select">
                <input type="radio" name="type" value="hotel" onclick="change_list(event)">
                <span class="check_label">-Hotel </span>
                <input type="radio" name="type" value="airbnb" onclick="change_list(event)">
                <span class="check_label">-AirBnB </span>
                <input type="radio" name="type" value="total" onclick="change_list(event)" checked>
                <span class="check_label">-Overall </span>
            </form>

            <div class="main_bottom">
                <div class="output" id="hotel_output" style="display: none">
                    <h3><font color="black">Ho</font><font color="#589442">tel</font></h3>
                    {% for line in hotel_output %}
                    <a href="{{ line.listing_url }}" class="tile" target="_blank">
                        {% if line.rating == None %}
                            <p>No Rating Available</p>
                        {% else %}
                        <!-- adapted from https://codepen.io/Bluetidepro/pen/GkpEa?editors=1100-->
                            <div class="star-ratings-css">
                              <div class="star-ratings-css-top" style="width: {{line.rating}}%"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                              <div class="star-ratings-css-bottom"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                            </div>
                        <!-- end adaptation -->
                        {% endif %}
                        <div class="imgWrap">
                            <img src="{{ line.image_url }}" class="tile_icon">
                        </div>
                        <br/>
                        <b>{{ line.name }}</b><br/>
                        Similarity Score:
                            {{ line.score }}
                        <br/>
                        Average Sentiment Score:
                        <span class="sentiments">{{ line.avg_sent_score }}</span>
{#                        <b>The Good: <span class="sentiments">{{ line.max_sent_score }}</span></b>#}
{#                        <br>#}
{#                        {{ line.max_sent_review }}#}
{#                        <br>#}
{#                        <b>The Bad: <span class="sentiments">{{ line.min_sent_score }}</span> </b>#}
{#                        <br>#}
{#                        {{ line.min_sent_review }}</p>#}

                        <br/>
                    </a>
                    {% endfor %}
                </div>
                <div class="output" id="airbnb_output" style="display: none">
                    <h3><font color="#ff5a5f">Airbnb</font></h3>
                    {% for line in airbnb_output %}
                    <a href="{{ line.listing_url }}" class="tile" target="_blank">
                        {% if line.rating == None %}
                            <p>No Rating Available</p>
                        {% else %}
                        <!-- adapted from https://codepen.io/Bluetidepro/pen/GkpEa?editors=1100-->
                            <div class="star-ratings-css">
                              <div class="star-ratings-css-top" style="width: {{line.rating}}%"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                              <div class="star-ratings-css-bottom"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                            </div>
                        <!-- end adaptation -->
                        {% endif %}
                        <div class="imgWrap">
                            <img src="{{ line.image_url }}" class="tile_icon">
                        </div>
                        <br/>
                        <b>{{ line.name }}</b><br/>
                        Similarity Score:
                        <span class="sentiments">
                            {{ line.score }}</span>
                        <br/>
                        <br/>
                        <br/>
                    </a>
                    {% endfor %}
                </div>
                <div class="output" id="total_output" >
                    <h3><font>Overall</font></h3>
                    {% for line in hotel_output %}
                    <a href="{{ line.listing_url }}" class="tile" target="_blank">


                        {% if line.rating == None %}
                            <p>No Rating Available</p>
                        {% else %}
                        <!-- adapted from https://codepen.io/Bluetidepro/pen/GkpEa?editors=1100-->
                            <div class="star-ratings-css">
                              <div class="star-ratings-css-top" style="width: {{line.rating}}%"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                              <div class="star-ratings-css-bottom"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                            </div>
                        <!-- end adaptation -->
                        {% endif %}
                            

                        <div class="imgWrap">
                            <img src="{{ line.image_url }}" class="tile_icon">
                        </div>
                        <br/>
                        <b>{{ line.name }}</b><br/>
                        Similarity Score:
                        <span class="sentiments">
                            {{ line.score }}</span>
                        <br/>

                        <p>{{ line.average_sent_score }}
                        <b>The Good: <span class="sentiments">{{ line.max_sent_score }}</span></b>
                        <br>
                        {{ line.max_sent_review }}
                        <br>
                        <b>The Bad: <span class="sentiments">{{ line.min_sent_score }}</span></b>
                        <br>
                        {{ line.min_sent_review }}</p>

                        <br/>
                    </a>
                    {% endfor %}

                </div>
            </div>
            {% endif %}
            </div>
        </div>
    </body>
</html>